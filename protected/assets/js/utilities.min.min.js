(function(e,d,f){e.urls={assets:"",base:"",login:"",logout:""};e.debug=false;e.modal={nextModalId:0,add:function(q,s,r,y,b){var u=this;var v="utilitiesModal";var a=v+u.nextModalId;u.nextModalId+=1;var t='class="modal hide fade';var w="";var z='<button class="btn btn-large" data-dismiss="modal" type="button" aria-hidden="true" id="close"><i class="icon-remove-sign"></i> Close</button>';if(typeof r==="string"){w=r;if(y){w+=z}}else{w=z}if(b){t+=' container"'}else{t+='"'}var x=['<div id="'+a+'" '+t+' tabindex="-1" role="dialog" aria-labelledby="'+a+'Label" aria-hidden="true" data-backdrop="static" data-max-height="500">'];x.push('<div id="'+a+'Header" class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 id="'+a+'Label">'+q+"</h4></div>");x.push('<div id="'+a+'Body" class="modal-body"></div>');x.push('<div id="'+a+'Footer" class="modal-footer">'+w+"</div>");x.push("</div>");var c=d(x.join("\n"));c.find("#"+a+"Body").html(s);d("body").on("hidden."+a,"#"+a,function(g){d("body").off("hidden."+a,g.target);u.nextModalId-=1;if(u.nextModalId<0){u.nextModalId=0}});return c}};e.ajaxError={dialogBox:"",show:function(n,l,a,p,b){var o=false;try{if(a&&a.responseText){o=JSON.parse(a.responseText)}}catch(m){o=false}var c='<p class="text-error"><strong>'+l+"</strong></p>";c+="<h4>Web Server Response</h4>";c+="<pre>Status: <strong>"+p+"</strong>\n";c+="Message: <strong>"+b+"</strong>\n</pre>";if(o!==false){c+="<h4>Error Details</h4>";if(o.error==="LOGIN_REQUIRED"){c+="<pre>Error: <strong>Session has expired. Please <a href='#' onClick='document.location.reload(true);return false;'><i class='icon-user'></i> login</a> again.</strong>\n"}else{c+="<pre>Error: <strong>"+o.error+"</strong>\n"}if(o.exception===true){c+="Exception Code: <strong>"+o.errorCode+"</strong>\n";c+="Exception File: <strong>"+o.errorFile+"</strong>\n";c+="Exception Line: <strong>"+o.errorLine+"</strong>\n";if(o.errorInfo!==null){c+="</pre><h4>Database Server Response</h4>";c+="<pre>SQLSTATE Code: <strong>"+o.errorInfo.sqlState+"</strong>\n";c+="Driver Code: <strong>"+o.errorInfo.mysqlError+"</strong>\n";c+="Driver Message: <strong>"+o.errorInfo.message+"</strong>\n"}}c+="</pre>"}else{if(a&&a.responseText){c+="<h4>Error Details</h4>";c+="<pre>Error: <strong>"+a.responseText+"</pre></strong>"}}e.modal.add(n,c,null,null,true).modal("show")}};e.loadingScreen={$element:null,containerId:"",parentId:"",text:{enabled:false,content:"Please wait..."},image:{enabled:false,src:e.urls.base+'/images/spinners/ajax-loader.gif"',alt:"Loading...",content:'<div id="loading" class="loading-spinner" style="width: 200px;margin-left: -100px;"><div class="active"><div style="width: 100%;"><img src="'+e.urls.base+'/images/spinners/ajax-loader.gif" alt="Loading..." /></div></div></div>'},progress:{enabled:false,type:"progress",content:'<div id="loading-progress" class="loading-spinner" style="width: 200px;margin-left: -100px;"><div class="progress progress-striped active"><div id="myProgress" class="bar" style="width: 0%;"></div></div></div>',percent:0,step:40},show:function(){if(this.$element){return}d("#"+this.parentId).children().hide();var a="";if(this.enabled===true){a+='<p class="loading-stuff">'+this.text+"</p>"}if(this.image.enabled===true){a+='<div class="loading-stuff"><img src="'+e.urls.base+this.image.src+'" alt="Loading..." /></div>'}if(this.progress.enabled===true){a+='<div class="'+this.progress.type+' loading-stuff">';a+='<div id="myProgress" class="bar" style="width: '+this.progress.percent+'%;"></div></div>'}this.$element=d(a);if(this.containerId!==""){this.$element.appendTo("#"+this.containerId);d("#"+this.containerId).show()}else{this.$element.appendTo("#"+this.parentId)}},hide:function(){if(!this.$element){return}this.$element.remove();this.$element=null;d("#"+this.parentId).children().show()},stepUp:function(){this.stepUpBy(this.progress.step)},stepDown:function(){this.stepDownBy(this.progress.step)},stepUpBy:function(a){if(this.progress.enabled===false){return}if(this.progress.percent+a>=100){this.progress.percent=100}else{this.progress.percent+=a}d("#myProgress").width(this.progress.percent+"%")},stepDownBy:function(a){if(this.progress.enabled===false){return}if(this.progress.percent-a<=0){this.progress.percent=0}else{this.progress.percent-=a}d("#myProgress").width(this.progress.percent+"%")}};e.arrayHasOwnIndex=function(a,b){return a.hasOwnProperty(b)&&/^0$|^[1-9]\d*$/.test(b)&&b<=4294967294};String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)}}(window.utilities=window.utilities||{},jQuery));