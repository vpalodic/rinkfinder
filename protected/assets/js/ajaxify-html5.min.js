(function(c,e){var b=c.History,d=c.jQuery,a=c.document;if(!b.enabled){return false}d(function(){var q="#content,article:first,.article:first,.post:first",h=d(q).filter(":first"),n=h.get(0),f=d("#menu,#nav,nav:first,.nav:first").filter(":first"),p="active selected current youarehere",k=".active,.selected,.current,.youarehere",r="> li,> ul > li",m="statechangecomplete",i=d(c),l=d(a.body),g=b.getRootUrl(),j={duration:800,easing:"swing"};if(h.length===0){h=l}d.expr[":"].internal=function(y,u,x,s){var w=d(y),t=w.attr("href")||"",v;v=t.substring(0,g.length)===g||t.indexOf(":")===-1;return v};var o=function(t){var s=String(t).replace(/<\!DOCTYPE[^>]*>/i,"").replace(/<(html|head|body|title|meta|script)([\s\>])/gi,'<div class="document-$1"$2').replace(/<\/(html|head|body|title|meta|script)\>/gi,"</div>");return d.trim(s)};d.fn.ajaxify=function(){var s=d(this);s.find("a:internal:not(.no-ajaxy)").click(function(u){var v=d(this),t=v.attr("href"),w=v.attr("title")||null;if(u.which==2||u.metaKey){return true}b.pushState(null,w,t);u.preventDefault();return false});return s};l.ajaxify();i.bind("statechange",function(){var t=b.getState(),u=t.url,s=u.replace(g,"");l.addClass("loading");h.animate({opacity:0},800);d.ajax({url:u,success:function(A,w,E){var y=d(o(A)),x=y.find(".document-body:first"),B=x.find(q).filter(":first"),D,C,v;v=B.find(".document-script");if(v.length){v.detach()}C=B.html()||y.html();if(!C){a.location.href=u;return false}D=f.find(r);D.filter(k).removeClass(p);D=D.has('a[href^="'+s+'"],a[href^="/'+s+'"],a[href^="'+u+'"]');if(D.length===1){D.addClass(p)}h.stop(true,true);h.html(C).ajaxify().css("opacity",100).show();a.title=y.find(".document-title:first").text();try{a.getElementsByTagName("title")[0].innerHTML=a.title.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(z){}v.each(function(){var H=d(this),G=H.text(),F=a.createElement("script");if(H.attr("src")){if(!H[0].async){F.async=false}F.src=H.attr("src")}F.appendChild(a.createTextNode(G));n.appendChild(F)});if(l.ScrollTo||false){l.ScrollTo(j)}l.removeClass("loading");i.trigger(m);if(typeof c._gaq!=="undefined"){c._gaq.push(["_trackPageview",s])}if(typeof c.reinvigorate!=="undefined"&&typeof c.reinvigorate.ajax_track!=="undefined"){reinvigorate.ajax_track(u)}},error:function(v,x,w){a.location.href=u;return false}})})})})(window);