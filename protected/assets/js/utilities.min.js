(function(a,b,c){a.urls={assets:"",base:"",login:"",logout:""};a.debug=false;a.modal={nextModalId:0,add:function(m,k,l,e,o){var i=this;var h="utilitiesModal";var p=h+i.nextModalId;i.nextModalId+=1;var j='class="modal hide fade';var g="";var d='<button class="btn btn-large" data-dismiss="modal" type="button" aria-hidden="true" id="close"><i class="fa fa-fw fa-lg fa-times"></i> Close</button>';if(typeof l==="string"){g=l;if(e){g+=d}}else{g=d}if(o){j+=' container"'}else{j+='"'}var f=['<div id="'+p+'" '+j+' tabindex="-1" role="dialog" aria-labelledby="'+p+'Label" aria-hidden="true" data-backdrop="static" data-max-height="500">'];f.push('<div id="'+p+'Header" class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 id="'+p+'Label">'+m+"</h4></div>");f.push('<div id="'+p+'Body" class="modal-body"></div>');f.push('<div id="'+p+'Footer" class="modal-footer">'+g+"</div>");f.push("</div>");var n=b(f.join("\n"));n.find("#"+p+"Body").html(k);b("body").on("hidden."+p,"#"+p,function(q){b("body").off("hidden."+p,q.target);i.nextModalId-=1;if(i.nextModalId<0){i.nextModalId=0}});return n}};a.ajaxError={dialogBox:"",show:function(j,l,k,g,i){var f=false;try{if(k&&k.responseText){f=JSON.parse(k.responseText)}}catch(e){f=false}var h='<p class="text-error"><strong>'+l+"</strong></p>";h+="<h4>Web Server Response</h4>";h+="<pre>Status: <strong>"+g+"</strong>\n";h+="Message: <strong>"+i+"</strong>\n</pre>";if(f!==false){h+="<h4>Error Details</h4>";if(f.error==="LOGIN_REQUIRED"){h+="<pre>Error: <strong>Session has expired. Please <a href='#' onClick='document.location.reload(true);return false;'><i class='icon-user'></i> login</a> again.</strong>\n"}else{h+="<pre>Error: <strong>"+f.error+"</strong>\n"}if(f.exception===true){h+="Exception Code: <strong>"+f.errorCode+"</strong>\n";h+="Exception File: <strong>"+f.errorFile+"</strong>\n";h+="Exception Line: <strong>"+f.errorLine+"</strong>\n";if(f.errorInfo!==null){h+="</pre><h4>Database Server Response</h4>";h+="<pre>SQLSTATE Code: <strong>"+f.errorInfo.sqlState+"</strong>\n";h+="Driver Code: <strong>"+f.errorInfo.mysqlError+"</strong>\n";h+="Driver Message: <strong>"+f.errorInfo.message+"</strong>\n"}}h+="</pre>"}else{if(k&&k.responseText){h+="<h4>Error Details</h4>";try{var d=b(k.responseText).find(("#content"));if(d.length>0){h+="<pre>Error: <strong>"+d.html()+"</pre></strong>"}}catch(e){h+="<pre>Error: <strong>"+k.responseText+"</pre></strong>"}}}a.modal.add(j,h,null,null,true).modal("show")}};a.addAlert=function(h,e,g,f){var d='<div class="'+e+'"><button type="button" class="close" data-dismiss="alert">&times;</button><span class="badge badge-important">'+g+"</span><br />"+f+"</div>";b("#"+h).append(d)};a.loadingScreen={$element:null,containerId:"",parentId:"",text:{enabled:false,content:"Please wait..."},image:{enabled:true,src:a.urls.base+'/images/spinners/ajax-loader.gif"',alt:"Loading...",content:'<div id="loading" class="loading-spinner" style="width: 200px;margin-left: -100px;"><div class="active"><div style="width: 100%;"><img src="'+a.urls.base+'/images/spinners/ajax-loader.gif" alt="Loading..." /></div></div></div>'},progress:{enabled:false,type:"progress",content:'<div id="loading-progress" class="loading-spinner" style="width: 200px;margin-left: -100px;"><div class="progress progress-striped active"><div id="myProgress" class="bar" style="width: 0%;"></div></div></div>',percent:0,step:40},show:function(){if(this.$element){return}b("#"+this.parentId).children().hide();var d="";if(this.text.enabled===true){d+='<p class="loading-stuff">'+this.text+"</p>"}if(this.image.enabled===true){d+='<div class="loading-stuff"><img src="'+a.urls.base+this.image.src+'" alt="Loading..." /></div>'}if(this.progress.enabled===true){d+='<div class="'+this.progress.type+' loading-stuff">';d+='<div id="myProgress" class="bar" style="width: '+this.progress.percent+'%;"></div></div>'}this.$element=b(d);if(this.containerId!==""){this.$element.appendTo("#"+this.containerId);b("#"+this.containerId).show()}else{this.$element.appendTo("#"+this.parentId)}},hide:function(){if(!this.$element){return}this.$element.remove();this.$element=null;b("#"+this.parentId).children().show()},stepUp:function(){this.stepUpBy(this.progress.step)},stepDown:function(){this.stepDownBy(this.progress.step)},stepUpBy:function(d){if(this.progress.enabled===false){return}if(this.progress.percent+d>=100){this.progress.percent=100}else{this.progress.percent+=d}b("#myProgress").width(this.progress.percent+"%")},stepDownBy:function(d){if(this.progress.enabled===false){return}if(this.progress.percent-d<=0){this.progress.percent=0}else{this.progress.percent-=d}b("#myProgress").width(this.progress.percent+"%")}};a.getUrlVars=function(){var g=[],f;var d=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var e=0;e<d.length;e++){f=d[e].split("=");g.push(f[0]);g[f[0]]=f[1]}return g};a.arrayHasOwnIndex=function(e,d){return e.hasOwnProperty(d)&&/^0$|^[1-9]\d*$/.test(d)&&d<=4294967294};String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};b(".fade-message").animate({opacity:1},30000).fadeOut("slow");b.event.special.destroyed={remove:function(d){if(d.handler){d.handler()}}}}(window.utilities=window.utilities||{},jQuery));