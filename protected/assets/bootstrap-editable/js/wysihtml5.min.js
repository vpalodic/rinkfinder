(function(a){var b=function(c){this.init("wysihtml5",c,b.defaults);this.options.wysihtml5=a.extend({},b.defaults.wysihtml5,c.wysihtml5)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{render:function(){var d=a.Deferred(),c;this.$input.attr("id","textarea_"+(new Date()).getTime());this.setClass();this.setAttr("placeholder");a.extend(this.options.wysihtml5,{events:{load:function(){d.resolve()}}});this.$input.wysihtml5(this.options.wysihtml5);c=/msie\s*(8|7|6)/.test(navigator.userAgent.toLowerCase());if(c){this.$input.before("<br><br>")}return d.promise()},value2html:function(d,c){a(c).html(d)},html2value:function(c){return c},value2input:function(c){this.$input.data("wysihtml5").editor.setValue(c,true)},activate:function(){this.$input.data("wysihtml5").editor.focus()},isEmpty:function(c){if(a.trim(c.html())===""){return true}else{if(a.trim(c.text())!==""){return false}else{return !c.height()||!c.width()}}}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"editable-wysihtml5",placeholder:null,wysihtml5:{stylesheets:false}});a.fn.editabletypes.wysihtml5=b}(window.jQuery));